[TOC]

# 定义数据

## 内部数据类型

汇编语言中，汇编器识别一组基本的内部数据类型，按照数据大小，符号以及整实数区分。

|  类型  |        描述        |
| :----: | :----------------: |
|  BYTE  |   8位无符号整数    |
| SBYTE  |   8位有符号整数    |
|  WORD  |   16位无符号整数   |
| SWORD  |   16位有符号整数   |
| DWORD  |   32位无符号整数   |
| SDWORD |   32位有符号整数   |
| FWORD  | 48位整数（远指针） |
| QWORD  |      64位整数      |
| TBYTE  |      80位整数      |
| REAL4  |   32位IEEE短实数   |
| REAL8  |   64位IEEE长实数   |
| REAL10 |  80位IEEE扩展实数  |

这些类型有相当程度的重叠，例如dword就可以换用sdword表示。对于汇编器来说，它只评估操作数大小，并不会去区分数据类型。

## 数据定义语句

数据定义的格式如下：

```
[ name ] directive initializer [ ,initializer ]...
```

### 名字

分配给变量的可选名字须遵守[标识符规范](basic language elements.md#标识符)。

### 伪指令

上表提供的类型之一。但是也可以是以下传统定义伪指令

| 伪指令 |      描述      | 伪指令 |      描述      |
| :----: | :------------: | :----: | :------------: |
|   DB   |    8位整数     |   DQ   | 64位整数或实数 |
|   DW   |    16位整数    |   DT   |    80位整数    |
|   DD   | 32位整数或实数 |        |                |

### 初始值

数据至少需要一个初始值，即使为0。如果不想让其初始化，可以使用符号 ？ 作为初始值。所有初始值都会被转换成**二进制**数据。

## BYTE和SBYTE数据

BYTE和SBYTE为一个或多个无符号或者有符号数据分配存储空间。每个初始值在存储时，都必须是**8位**。BYTE范围为**0~255**，SBYTE范围为**-128~127**。例如：

```assembly
var1 byte 1
var2 sbyte -1
var3 byte ?
var4 db 1
```

名字是一个标号，标识从变量包含段的开始到该变量的偏移量。假设var1在0000处，数据类型为byte，则var2在0001处。

### 多初始值

如果一个数据定义使用了多个初始值，那么它的标号只表示第一个数据的偏移量。例：

```assembly
array byte 10,20,30,40
```

如果把10处的偏移量定为0000，则array代表的数据的偏移量就是0000，20处的是0001，30的是0002，40的是0003。

并不是所有的数据都要标号。例：

```assembly
array1 byte 1,2,3,4
       byte 5,6,7,8
```

根据上述偏移量的结论，我们可以使用array1的偏移量计算来使用没有标号的数据，因为他们是连续定义的。

当然，在数据定义的时候，也可以使用不同基数的数据。例：

```assembly
ARRAY byte 10,40h,00000110b
```

### 字符串

定义字符串，需要将其用引号包含。通常使用空字节0作为结束的标记，这叫做**以空字节结束的**字符串。例：

```assembly
string byte "hello",0
```

每个字符都占据一个字节的存储空间，所以string字符串将会占用6个字节。

一个字符串可以分成多行，使用空字节结束一个字符串作为分割标记。例：

```assembly
str byte "hello there."
	byte "my name is Bob.",0dh,0ah
    					;0dh和0ah为回车换行符CR/LF。输出时，他们将光标移至下一行行首。
	byte "nice to meet you.",0
```

符号 \ 可以把两行代码连接成一条语句，但是它必须是行末字符。例：

```assembly
str2 \
	byte "hello",0
```

### DUP操作符

DUP操作符使用一个整数表达式作为计数器，为多数据项分配存储空间。在为多数据赋值时十分有用。例：

```assembly
data1 byte 4 dup(0) ;等价于 data1 byte 0,0,0,0
data2 byte 4 dup(?) ;等价于 data2 byte ?,?,?,?
data3 byte 2 dup("abc") ;等价于 data3 byte "abc","abc"
```

## WORD和SWORD数据

WORD和SWORD为一个或多个无符号或者有符号的16位整数分配存储空间。WORD范围是**0~65,535**，SWORD范围是**-32,768~32,767**。例：

```assembly
var1 word 1
var2 sword -1
var3 dw 1
var4 dw -1
```

### 十六位数组

通过DUP或者列举来创建16位数组。例：

```assembly
array word 1,2,3,4
```

在这个数组中，每个数据的偏移量为2个字节。设array偏移量为0000，则2为0002，3为0004，4为0006。

## DWORD和SDWORD数据

DWORD和SDWORD为一个或多个无符号或者有符号的32位整数分配存储空间。WORD范围是**0~4,294,967,295**，SWORD范围是**-2,147,483,648~2,147,483,647**。例：

```assembly
var1 dword 1
var2 sdword -1
var3 dd 1
var4 dd -1
```

DWORD数据的偏移量为4字节，即在某一数组中，设第一个数据的偏移量是0000，则第二个数据是0004，第三个是0008，以此类推。

DWORD还可以以另一个变量的**偏移量**为数值去进行声明新变量，例：

```assembly
var1 dword 1
var2 dword var1
```

设var1的偏移量是0004，则var2的数值就是0004。

## QWORD数据

